<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adriana Sousa - Transforma√ß√£o Pessoal</title>
    <!-- Preload das imagens cr√≠ticas -->
    <link rel="preload" as="image" href="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png">
    <link rel="preload" as="image" href="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Imagem%20do%20WhatsApp%20de%202025-09-23%20%C3%A0(s)%2015.21.04_61513830-vmake.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #F8F5F0;
            --text: #33353A;
            --accent: #D4AF37;
            --dark: #1A2035;
            --white: #ffffff;
            --purple: #7C3AED;
            --gold-gradient: linear-gradient(135deg, #D4AF37 0%, #FFD700 70%, #B8860B 100%);
            --shadow-luxury: 0 15px 50px rgba(26, 32, 53, 0.2);
            
            /* Cores para cada frase */
            --cor-estado: #FF6B35;        /* Laranja vibrante */
            --cor-gentilico: #7C3AED;     /* Roxo */
            --cor-horario: #059669;       /* Verde */
            --cor-pergunta: #DC2626;      /* Vermelho */
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #F8F5F0 0%, #E8E5E0 100%);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-attachment: fixed;
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            padding: 15px;
            position: relative;
        }

        /* AVATAR SECTION - TAMANHO IDEAL DO SAFE7 */
        .avatar-section {
            text-align: center;
            padding: 15px;
            background: var(--white);
            margin-bottom: 20px;
            border-radius: 20px;
            box-shadow: var(--shadow-luxury);
            border: 2px solid rgba(212, 175, 55, 0.3);
            margin-top: 15px;
            transition: all 1s ease;
            min-height: 80vh;
        }

        .name {
            font-size: 28px;
            font-weight: 900;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .specialty {
            font-size: 16px;
            font-weight: 700;
            color: var(--purple);
            margin-bottom: 20px;
        }

        .avatar-container {
            position: relative;
            display: flex;
            justify-content: center;
            margin: 20px 0;
            min-height: 500px;
        }

        .avatar {
            width: 100%;
            max-width: 350px;
            height: 500px;
            object-fit: cover;
            border-radius: 20px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            box-shadow: var(--shadow-luxury);
            transition: all 0.5s ease;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            will-change: transform;
            pointer-events: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }

        .avatar-message {
            position: absolute;
            top: 30%;
            left: 65%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 200px;
            font-size: 16px;
            font-weight: 900;
            color: var(--dark);
            text-align: center;
            opacity: 0;
            transition: all 0.6s ease;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            padding: 0;
            background: transparent;
            border-radius: 0;
            line-height: 1.3;
            backdrop-filter: none;
            z-index: 10;
            pointer-events: none;
            border-right: 3px solid transparent;
        }

        .avatar-message.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        /* Cores espec√≠ficas para cada tipo de mensagem */
        .avatar-message.fase-estado {
            color: var(--cor-estado);
            border-right-color: var(--cor-estado);
        }

        .avatar-message.fase-gentilico {
            color: var(--cor-gentilico);
            border-right-color: var(--cor-gentilico);
            font-size: 17px;
            font-weight: 900;
        }

        .avatar-message.fase-horario {
            color: #DC2626;
            border-right-color: #DC2626;
            font-size: 18px;
            font-weight: 900;
            text-shadow: 1px 1px 2px rgba(220, 38, 38, 0.3);
        }

        .avatar-message.fase-pergunta {
            color: #DC2626;
            font-size: 28px;
            font-weight: 900;
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Efeito de cursor piscando (typewriter) */
        .avatar-message.typing {
            border-right: 3px solid currentColor;
            animation: blinkCursor 1s infinite;
        }

        @keyframes blinkCursor {
            0%, 50% { border-right-color: currentColor; }
            51%, 100% { border-right-color: transparent; }
        }

        /* Responsividade Mobile */
        @media (max-width: 480px) {
            .container {
                padding: 8px;
            }

            .avatar-section {
                padding: 15px 10px 10px;
                margin: 8px 0 15px 0;
                border-radius: 16px;
            }

            .name {
                font-size: 24px;
            }

            .specialty {
                font-size: 14px;
                margin-bottom: 15px;
            }

            .avatar {
                max-width: 300px;
                height: 450px;
                border-radius: 16px;
            }

            .avatar-container {
                margin: 15px 0;
                min-height: 450px;
            }

            .avatar-message {
                top: 32%;
                left: 62%;
                max-width: 180px;
                font-size: 14px;
            }

            .avatar-message.fase-pergunta {
                font-size: 24px;
            }

            .avatar-message.fase-horario {
                font-size: 16px;
            }

            .avatar-message.fase-gentilico {
                font-size: 15px;
            }
        }

        @media (max-width: 360px) {
            .avatar {
                max-width: 280px;
                height: 420px;
            }

            .avatar-container {
                min-height: 420px;
            }

            .avatar-message {
                top: 30%;
                left: 60%;
                max-width: 160px;
                font-size: 13px;
            }

            .avatar-message.fase-pergunta {
                font-size: 20px;
            }

            .avatar-message.fase-horario {
                font-size: 14px;
            }

            .avatar-message.fase-gentilico {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="avatar-section" id="avatarSection">
            <div class="avatar-container">
                <img 
                    src="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png" 
                    alt="Adriana Sousa" 
                    class="avatar"
                    loading="eager"
                >
                <div id="avatarMessage" class="avatar-message"></div>
            </div>
        </div>

    </div>

    <script>
        // ==================== SISTEMA COMPLETO: 27 ESTADOS + DF + APIS DE BACKUP ====================
        // Sequ√™ncia otimizada: "OI DE [ESTADO]!" + "[GENT√çLICO] √ÄS [HORA] - [EXPRESS√ÉO]!" + "COMO AS PESSOAS QUE TE AMAM TE CHAMAM? üëá"

        const SISTEMA_COMPLETO = {
            ESTADOS_CONFIG: {
                // ============ REGI√ÉO NORTE ============
                'AC': {
                    sigla: 'AC',
                    nome: 'Acre',
                    gentilico: 'ACRIANO',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Rio_Branco',
                    utc_offset: -5
                },
                'AP': {
                    sigla: 'AP', 
                    nome: 'Amap√°',
                    gentilico: 'AMAPAENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'AM': {
                    sigla: 'AM',
                    nome: 'Amazonas', 
                    gentilico: 'AMAZONENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Manaus',
                    utc_offset: -4
                },
                'PA': {
                    sigla: 'PA',
                    nome: 'Par√°',
                    gentilico: 'PARAENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'RO': {
                    sigla: 'RO',
                    nome: 'Rond√¥nia',
                    gentilico: 'RONDONIENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Porto_Velho',
                    utc_offset: -4
                },
                'RR': {
                    sigla: 'RR',
                    nome: 'Roraima',
                    gentilico: 'RORAIMENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Boa_Vista',
                    utc_offset: -4
                },
                'TO': {
                    sigla: 'TO',
                    nome: 'Tocantins',
                    gentilico: 'TOCANTINENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },

                // ============ REGI√ÉO NORDESTE ============
                'AL': {
                    sigla: 'AL',
                    nome: 'Alagoas',
                    gentilico: 'ALAGOANO',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'BA': {
                    sigla: 'BA',
                    nome: 'Bahia',
                    gentilico: 'BAIANO',
                    expressao: 'OXE, QUE MASSA!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'CE': {
                    sigla: 'CE',
                    nome: 'Cear√°',
                    gentilico: 'CEARENSE',
                    expressao: 'OXENTE, QUE BOM!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'MA': {
                    sigla: 'MA',
                    nome: 'Maranh√£o',
                    gentilico: 'MARANHENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'PB': {
                    sigla: 'PB',
                    nome: 'Para√≠ba',
                    gentilico: 'PARAIBANO',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'PE': {
                    sigla: 'PE',
                    nome: 'Pernambuco',
                    gentilico: 'PERNAMBUCANO',
                    expressao: 'AR√ä, QUE SHOW!',
                    timezone: 'America/Recife',
                    utc_offset: -3
                },
                'PI': {
                    sigla: 'PI',
                    nome: 'Piau√≠',
                    gentilico: 'PIAUIENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'RN': {
                    sigla: 'RN',
                    nome: 'Rio Grande do Norte',
                    gentilico: 'POTIGUAR',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },
                'SE': {
                    sigla: 'SE',
                    nome: 'Sergipe',
                    gentilico: 'SERGIPANO',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Fortaleza',
                    utc_offset: -3
                },

                // ============ REGI√ÉO CENTRO-OESTE ============
                'DF': {
                    sigla: 'DF',
                    nome: 'Distrito Federal',
                    gentilico: 'CANDANGO',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },
                'GO': {
                    sigla: 'GO',
                    nome: 'Goi√°s',
                    gentilico: 'GOIANO',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },
                'MT': {
                    sigla: 'MT',
                    nome: 'Mato Grosso',
                    gentilico: 'MATO-GROSSENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Cuiaba',
                    utc_offset: -4
                },
                'MS': {
                    sigla: 'MS',
                    nome: 'Mato Grosso do Sul',
                    gentilico: 'SUL-MATO-GROSSENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Campo_Grande',
                    utc_offset: -4
                },

                // ============ REGI√ÉO SUDESTE ============
                'ES': {
                    sigla: 'ES',
                    nome: 'Esp√≠rito Santo',
                    gentilico: 'CAPIXABA',
                    expressao: 'CANELA VERDE!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },
                'MG': {
                    sigla: 'MG',
                    nome: 'Minas Gerais',
                    gentilico: 'MINEIRO',
                    expressao: 'QUE TREM BOM!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },
                'RJ': {
                    sigla: 'RJ',
                    nome: 'Rio de Janeiro',
                    gentilico: 'CARIOCA',
                    expressao: 'MASSA DEMAIS!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },
                'SP': {
                    sigla: 'SP',
                    nome: 'S√£o Paulo',
                    gentilico: 'PAULISTA',
                    expressao: 'NOSSA!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },

                // ============ REGI√ÉO SUL ============
                'PR': {
                    sigla: 'PR',
                    nome: 'Paran√°',
                    gentilico: 'PARANAENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },
                'RS': {
                    sigla: 'RS',
                    nome: 'Rio Grande do Sul',
                    gentilico: 'GA√öCHO',
                    expressao: 'BAAAAH, QUE LEGAL!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                },
                'SC': {
                    sigla: 'SC',
                    nome: 'Santa Catarina',
                    gentilico: 'CATARINENSE',
                    expressao: 'QUE BOM TE ENCONTRAR!',
                    timezone: 'America/Sao_Paulo',
                    utc_offset: -3
                }
            },

            // ============ MENSAGENS CONTEXTUAIS POR HOR√ÅRIO ============
            getMensagemTempo: function(hora, dia, estado) {
                // Manh√£ (5-11h)
                if (hora >= 5 && hora < 12) {
                    if (dia === 1) return "BOM DIA! SEGUNDA ANIMADA!";
                    if (dia === 5) return "BOM DIA! SEXTA-FEIRA!";
                    if (dia === 6) return "BOM DIA! S√ÅBADO PERFEITO!";
                    if (dia === 0) return "BOM DIA! DOMINGO ABEN√áOADO!";
                    return "BOM DIA! QUE MANH√É LINDA!";
                }
                // Tarde (12-17h)
                else if (hora >= 12 && hora < 18) {
                    if (dia === 1) return "BOA TARDE! SEGUNDA PRODUTIVA!";
                    if (dia === 5) return "BOA TARDE! SEXTA √â VIDA!";
                    if (dia === 6) return "BOA TARDE! S√ÅBADO GOSTOSO!";
                    if (dia === 0) return "BOA TARDE! DOMINGO RELAXANTE!";
                    return "BOA TARDE! QUE CALOR BOM!";
                }
                // Noite (18-23h)
                else if (hora >= 18 && hora < 24) {
                    if (dia === 1) return "BOA NOITE! SEGUNDA CHEGANDO AO FIM!";
                    if (dia === 5) return "BOA NOITE! SEXTA √Ä NOITE √â TUDO!";
                    if (dia === 6) return "BOA NOITE! S√ÅBADO √Ä NOITE!";
                    if (dia === 0) return "BOA NOITE! DOMINGO TRANQUILO!";
                    return "BOA NOITE! QUE NOITE ESPECIAL!";
                }
                // Madrugada (0-4h)
                else {
                    if (dia === 1) return "√â MADRUGADA! SEGUNDA J√Å COME√áOU!";
                    if (dia === 6) return "√â MADRUGADA! SABAD√ÉO ROLANDO!";
                    if (dia === 0) return "√â MADRUGADA! DOMINGO DE MADRUGADA!";
                    return "√â MADRUGADA! T√Å ACORDADO(A) AINDA?";
                }
            },

            // ============ HOR√ÅRIO LOCAL POR ESTADO COM FALLBACKS ROBUSTOS ============
            getHorarioLocal: function(estado) {
                const config = this.ESTADOS_CONFIG[estado] || this.ESTADOS_CONFIG['SP'];
                const agora = new Date();
                
                // Tentativa 1: Timezone espec√≠fico do estado
                try {
                    const horarioLocal = new Date(agora.toLocaleString("en-US", {timeZone: config.timezone}));
                    console.log(`‚è∞ Hor√°rio ${estado} via timezone ${config.timezone}:`, horarioLocal);
                    return {
                        hora: horarioLocal.getHours(),
                        minuto: horarioLocal.getMinutes(),
                        dia: horarioLocal.getDay(),
                        formatado: `${horarioLocal.getHours().toString().padStart(2, '0')}:${horarioLocal.getMinutes().toString().padStart(2, '0')}`,
                        metodo: 'timezone_especifico'
                    };
                } catch (error) {
                    console.log(`‚ùå Erro timezone espec√≠fico para ${estado}:`, error.message);
                }
                
                // Tentativa 2: Fallback por regi√£o (baseado no UTC offset)
                try {
                    const offsetMinutos = config.utc_offset * 60;
                    const utc = agora.getTime() + (agora.getTimezoneOffset() * 60000);
                    const horarioLocal = new Date(utc + (offsetMinutos * 60000));
                    console.log(`‚è∞ Hor√°rio ${estado} via UTC offset ${config.utc_offset}:`, horarioLocal);
                    return {
                        hora: horarioLocal.getHours(),
                        minuto: horarioLocal.getMinutes(),
                        dia: horarioLocal.getDay(),
                        formatado: `${horarioLocal.getHours().toString().padStart(2, '0')}:${horarioLocal.getMinutes().toString().padStart(2, '0')}`,
                        metodo: 'utc_offset'
                    };
                } catch (error) {
                    console.log(`‚ùå Erro UTC offset para ${estado}:`, error.message);
                }
                
                // Tentativa 3: Fallback por timezone similar
                const fallbackTimezones = {
                    'AC': 'America/Rio_Branco',
                    'AM': 'America/Manaus', 
                    'RO': 'America/Porto_Velho',
                    'RR': 'America/Boa_Vista',
                    'MT': 'America/Cuiaba',
                    'MS': 'America/Campo_Grande',
                    'default': 'America/Sao_Paulo'
                };
                
                const fallbackTz = fallbackTimezones[estado] || fallbackTimezones.default;
                try {
                    const horarioLocal = new Date(agora.toLocaleString("en-US", {timeZone: fallbackTz}));
                    console.log(`‚è∞ Hor√°rio ${estado} via fallback timezone ${fallbackTz}:`, horarioLocal);
                    return {
                        hora: horarioLocal.getHours(),
                        minuto: horarioLocal.getMinutes(),
                        dia: horarioLocal.getDay(),
                        formatado: `${horarioLocal.getHours().toString().padStart(2, '0')}:${horarioLocal.getMinutes().toString().padStart(2, '0')}`,
                        metodo: 'fallback_timezone'
                    };
                } catch (error) {
                    console.log(`‚ùå Erro fallback timezone para ${estado}:`, error.message);
                }
                
                // Tentativa 4: Hor√°rio do navegador como √∫ltimo recurso
                console.log(`üè† Usando hor√°rio do navegador para ${estado}`);
                return {
                    hora: agora.getHours(),
                    minuto: agora.getMinutes(),
                    dia: agora.getDay(),
                    formatado: `${agora.getHours().toString().padStart(2, '0')}:${agora.getMinutes().toString().padStart(2, '0')}`,
                    metodo: 'navegador_local'
                };
            },

            // ============ GERAR SEQU√äNCIA COMPLETA PERSONALIZADA ============
            gerarSequencia: function(estado) {
                const config = this.ESTADOS_CONFIG[estado] || this.ESTADOS_CONFIG['SP'];
                const tempo = this.getHorarioLocal(estado);
                
                // L√≥gica para "DO" vs "DE" baseado na primeira letra
                const preposicao = ['A', 'E', 'I', 'O', 'U'].includes(config.nome.charAt(0)) ? 'DO' : 'DE';
                
                return [
                    {
                        texto: `OI ${preposicao} ${config.nome}!`,
                        classe: "fase-estado"
                    },
                    {
                        texto: `${config.gentilico} √ÄS ${tempo.formatado}... VOC√ä EST√Å PRONTO(A)?`,
                        classe: "fase-gentilico"
                    },
                    {
                        texto: `SUA TRANSFORMA√á√ÉO COME√áA AGORA!`,
                        classe: "fase-horario"
                    },
                    {
                        texto: "CLIQUE E MUDE SUA VIDA! üëá",
                        classe: "fase-pergunta"
                    }
                ];
            }
        };

        // ==================== DETEC√á√ÉO DE LOCALIZA√á√ÉO COM 8 APIS DE BACKUP ====================

        async function detectUserLocation() {
            const apis = [
                // ===== APIS PRINCIPAIS =====
                {
                    url: 'https://ipapi.co/json/',
                    parse: (data) => ({
                        regiao: data.region?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.country_code || '',
                        ip: data.ip
                    })
                },
                {
                    url: 'https://get.geojs.io/v1/ip/geo.json',
                    parse: (data) => ({
                        regiao: data.region?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.country_code || '',
                        ip: data.ip
                    })
                },
                {
                    url: 'http://ip-api.com/json/',
                    parse: (data) => ({
                        regiao: data.regionName?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.countryCode || '',
                        ip: data.query
                    })
                },
                {
                    url: 'https://ipwhois.app/json/',
                    parse: (data) => ({
                        regiao: data.region?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.country_code || '',
                        ip: data.ip
                    })
                },
                
                // ===== APIS DE BACKUP =====
                {
                    url: 'https://ipinfo.io/json',
                    parse: (data) => ({
                        regiao: data.region?.toLowerCase() || '',
                        cidade: data.city || 'Brasil',
                        pais: data.country || '',
                        ip: data.ip
                    })
                },
                {
                    url: 'https://api.ipify.org?format=json',
                    parse: (data) => ({
                        regiao: '',
                        cidade: 'Brasil',
                        pais: 'BR',
                        ip: data.ip
                    })
                },
                {
                    url: 'https://api.myip.com',
                    parse: (data) => ({
                        regiao: '',
                        cidade: 'Brasil',
                        pais: data.country || 'BR',
                        ip: data.ip
                    })
                },
                {
                    url: 'https://httpbin.org/ip',
                    parse: (data) => ({
                        regiao: '',
                        cidade: 'Brasil', 
                        pais: 'BR',
                        ip: data.origin
                    })
                }
            ];

            for (let i = 0; i < apis.length; i++) {
                const api = apis[i];
                try {
                    console.log(`üåê Tentando API ${i + 1}/${apis.length}: ${api.url}`);
                    
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 4000);
                    
                    const response = await fetch(api.url, {
                        signal: controller.signal,
                        headers: { 
                            'Accept': 'application/json',
                            'User-Agent': 'Mozilla/5.0 (compatible; GeoDetector/1.0)'
                        }
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    
                    const data = await response.json();
                    const parsed = api.parse(data);
                    
                    console.log(`‚úÖ Sucesso API ${i + 1}:`, parsed);
                    
                    // Verificar se √© Brasil e se tem regi√£o
                    if (parsed.regiao && (parsed.pais === 'BR' || parsed.pais === 'Brazil' || !parsed.pais)) {
                        const estado = mapearEstado(parsed.regiao);
                        if (estado) {
                            console.log(`üéØ Estado detectado: ${estado} via API ${i + 1}`);
                            return { estado, cidade: parsed.cidade };
                        }
                    }
                    
                } catch (error) {
                    console.log(`‚ùå Erro API ${i + 1} (${api.url}):`, error.message);
                    continue;
                }
            }
            
            // ===== FALLBACK 1: TIMEZONE DO NAVEGADOR =====
            console.log('üïí Iniciando fallback por timezone...');
            try {
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                console.log(`‚è∞ Timezone detectado: ${timezone}`);
                
                const timezoneMap = {
                    'America/Sao_Paulo': 'SP',
                    'America/Fortaleza': 'CE', 
                    'America/Recife': 'PE',
                    'America/Manaus': 'AM',
                    'America/Campo_Grande': 'MS',
                    'America/Cuiaba': 'MT',
                    'America/Porto_Velho': 'RO',
                    'America/Rio_Branco': 'AC',
                    'America/Boa_Vista': 'RR'
                };
                
                for (const [tz, estado] of Object.entries(timezoneMap)) {
                    if (timezone.includes(tz)) {
                        console.log(`üéØ Estado detectado por timezone: ${estado}`);
                        return { estado, cidade: 'Brasil' };
                    }
                }
                
                // Se √© timezone brasileiro mas n√£o espec√≠fico, assumir SP
                if (timezone.includes('America') || timezone.includes('Brazil')) {
                    return { estado: 'SP', cidade: 'Brasil' };
                }
                
            } catch (timezoneError) {
                console.log('‚ùå Erro no fallback timezone:', timezoneError);
            }
            
            // ===== FALLBACK FINAL: S√ÉO PAULO COMO PADR√ÉO =====
            console.log('üè† Usando fallback final: S√£o Paulo');
            return { estado: 'SP', cidade: 'Brasil' };
        }

        function mapearEstado(regiao) {
            const mapeamento = {
                // Nomes completos dos estados
                'acre': 'AC', 'amazonas': 'AM', 'amap√°': 'AP', 'amapa': 'AP',
                'par√°': 'PA', 'para': 'PA', 'rond√¥nia': 'RO', 'rondonia': 'RO',
                'roraima': 'RR', 'tocantins': 'TO',
                
                'alagoas': 'AL', 'bahia': 'BA', 'cear√°': 'CE', 'ceara': 'CE',
                'maranh√£o': 'MA', 'maranhao': 'MA', 'para√≠ba': 'PB', 'paraiba': 'PB',
                'pernambuco': 'PE', 'piau√≠': 'PI', 'piaui': 'PI',
                'rio grande do norte': 'RN', 'sergipe': 'SE',
                
                'distrito federal': 'DF', 'bras√≠lia': 'DF', 'brasilia': 'DF',
                'goi√°s': 'GO', 'goias': 'GO', 'mato grosso': 'MT',
                'mato grosso do sul': 'MS',
                
                'esp√≠rito santo': 'ES', 'espirito santo': 'ES',
                'minas gerais': 'MG', 'rio de janeiro': 'RJ',
                's√£o paulo': 'SP', 'sao paulo': 'SP',
                
                'paran√°': 'PR', 'parana': 'PR', 'rio grande do sul': 'RS',
                'santa catarina': 'SC',
                
                // Siglas dos estados
                'ac': 'AC', 'am': 'AM', 'ap': 'AP', 'pa': 'PA', 'ro': 'RO',
                'rr': 'RR', 'to': 'TO', 'al': 'AL', 'ba': 'BA', 'ce': 'CE',
                'ma': 'MA', 'pb': 'PB', 'pe': 'PE', 'pi': 'PI', 'rn': 'RN',
                'se': 'SE', 'df': 'DF', 'go': 'GO', 'mt': 'MT', 'ms': 'MS',
                'es': 'ES', 'mg': 'MG', 'rj': 'RJ', 'sp': 'SP', 'pr': 'PR',
                'rs': 'RS', 'sc': 'SC',
                
                // Varia√ß√µes em ingl√™s e outras
                'state of s√£o paulo': 'SP', 'state of rio de janeiro': 'RJ',
                'state of minas gerais': 'MG', 'state of bahia': 'BA',
                'state of paran√°': 'PR', 'state of rio grande do sul': 'RS',
                'sao paulo state': 'SP', 'rio de janeiro state': 'RJ'
            };
            
            const estadoEncontrado = mapeamento[regiao.toLowerCase()];
            if (estadoEncontrado) {
                console.log(`üó∫Ô∏è Mapeamento: "${regiao}" -> ${estadoEncontrado}`);
            }
            return estadoEncontrado || null;
        }

        // ==================== EFEITO TYPEWRITER COM CORES ====================

        async function typewriterEffect(element, texto, velocidade = 80) {
            element.textContent = '';
            element.classList.add('typing');
            
            for (let i = 0; i < texto.length; i++) {
                element.textContent += texto.charAt(i);
                await sleep(velocidade);
            }
            
            element.classList.remove('typing');
        }

        async function startAvatarSequence() {
            const message = document.getElementById('avatarMessage');
            
            try {
                // Detectar localiza√ß√£o
                const location = await detectUserLocation();
                console.log('üìç Localiza√ß√£o final detectada:', location);
                
                // Gerar sequ√™ncia personalizada
                const sequencia = SISTEMA_COMPLETO.gerarSequencia(location.estado);
                console.log('üéØ Sequ√™ncia personalizada:', sequencia);
                
                // Executar sequ√™ncia de mensagens com cores e typewriter
                for (let i = 0; i < sequencia.length; i++) {
                    const item = sequencia[i];
                    
                    // Limpar classes e ocultar
                    message.className = 'avatar-message';
                    message.style.opacity = '0';
                    await sleep(200);
                    
                    // Adicionar classe da fase e mostrar
                    message.classList.add(item.classe);
                    message.style.opacity = '1';
                    
                    // Aplicar efeito typewriter
                    await typewriterEffect(message, item.texto, 60); // Velocidade r√°pida
                    
                    // Pausa entre frases - timing dram√°tico para criar tens√£o
                    if (i === 0) { // Primeira mensagem - pausa normal
                        await sleep(1800);
                    } else if (i === 1) { // Segunda mensagem - criar tens√£o
                        await sleep(2500);
                    } else if (i === 2) { // Mensagem de transforma√ß√£o - momento de impacto
                        await sleep(3000);
                    } else if (i === 3) { // Mensagem final de a√ß√£o
                        await sleep(2000);
                        // Sequ√™ncia finalizada
                        break;
                    }
                }
            } catch (error) {
                console.error('‚ùå Erro na sequ√™ncia do avatar:', error);
                // Fallback de emerg√™ncia
                message.textContent = "CLIQUE E MUDE SUA VIDA! üëá";
                message.classList.add('fase-pergunta');
                message.style.opacity = '1';
            }
        }

        // ==================== UTILIT√ÅRIOS ====================
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ==================== INICIALIZA√á√ÉO ====================
        
        const preloadImages = () => {
            const imageUrls = [
                'https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png',
                'https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Imagem%20do%20WhatsApp%20de%202025-09-23%20%C3%A0(s)%2015.21.04_61513830-vmake.jpg'
            ];
            
            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
            });
        };
        
        console.log('üöÄ Sistema COMPLETO carregado: 27 estados + DF + cores + typewriter + 8 APIs + contexto hor√°rio');
        console.log('üìä Estados configurados:', Object.keys(SISTEMA_COMPLETO.ESTADOS_CONFIG).length);
        console.log('‚ú® Express√µes especiais: ES="CANELA VERDE!" | MG="QUE TREM BOM!" | BA="OXE, QUE MASSA!" | RS="BAAAAH, QUE LEGAL!"');
        console.log('üë©‚Äçüíº Avatar da Adriana carregado: https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png');
        console.log('üïí Contextos de hor√°rio: BOM DIA | BOA TARDE | BOA NOITE | √â MADRUGADA + contexto do dia da semana');
        console.log('‚è∞ Fusos hor√°rios: AC/RO(-5/-4h) | AM/MT/MS(-4h) | Resto(-3h) + fallbacks robustos');
        console.log('üí¨ Sequ√™ncia: ESTADO ‚Üí GENT√çLICO+EXPRESS√ÉO ‚Üí HOR√ÅRIO+CONTEXTO ‚Üí PERGUNTA FINAL');
        
        preloadImages();
        
        // Iniciar sequ√™ncia ap√≥s 2 segundos
        setTimeout(() => {
            startAvatarSequence();
        }, 2000);
        
    </script>
</body>
</html>